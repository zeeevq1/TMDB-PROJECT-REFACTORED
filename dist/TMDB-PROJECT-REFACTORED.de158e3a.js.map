{"mappings":"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","sources":["src/main.js"],"sourcesContent":["const apiKey = \"fcb5f9f40d9acdf7af2d8c38ded9bb12\";\nconst apiUrl = `https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}&language=en-US&page=1`;\nconst imageBaseUrl = \"https://image.tmdb.org/t/p/w500\";\nconst LS_KEY = \"favorites\"; // کلید ذخیره‌سازی\n\nfunction loadFavorites() {\n  try {\n    return JSON.parse(localStorage.getItem(LS_KEY)) || [];\n  } catch {\n    return [];\n  }\n}\nfunction saveFavorites(favs) {\n  localStorage.setItem(LS_KEY, JSON.stringify(favs));\n}\nfunction isFav(id) {\n  const favs = loadFavorites();\n  return favs.some((m) => m.id === id);\n}\nfunction toggleFav(movie) {\n  const favs = loadFavorites();\n  const idx = favs.findIndex((m) => m.id === movie.id);\n  if (idx >= 0) favs.splice(idx, 1);\n  else\n    favs.push({\n      id: movie.id,\n      title: movie.title,\n      poster_path: movie.poster_path,\n      vote_average: movie.vote_average,\n      release_date: movie.release_date,\n    });\n  saveFavorites(favs);\n}\n\nasync function fetchMovies() {\n  try {\n    const res = await fetch(apiUrl);\n    const data = await res.json();\n    const movies = data.results;\n    displayMovies(data.results);\n    displayMovies(movies);\n    displayShows(movies);\n  } catch (error) {\n    console.error(\"Error fetching movies:\", error);\n  }\n}\n\nfunction displayMovies(movies) {\n  const container = document.getElementById(\"movie-container\");\n  container.innerHTML = \"\";\n\n  movies.forEach((movie) => {\n    const faved = isFav(movie.id);\n    const movieCard = document.createElement(\"div\");\n    movieCard.className =\n      \"bg-white/60 backdrop-blur rounded-lg overflow-hidden shadow-md hover:scale-105 transition transform duration-300 text-gray-900\";\n\n    movieCard.innerHTML = `\n      <div class=\"relative\">\n        <img src=\"${imageBaseUrl}${movie.poster_path}\" alt=\"${\n      movie.title\n    }\" class=\"w-full h-auto\">\n        <button\n          class=\"fav-btn absolute top-2 right-2 rounded-full p-2 bg-white/80 hover:bg-white shadow\"\n          aria-label=\"favorite\"\n          data-id=\"${movie.id}\">\n          ${\n            faved\n              ? `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-6 h-6 fill-pink-500\" viewBox=\"0 0 24 24\"><path d=\"M12 21s-6.716-4.35-9.428-7.062C.86 12.226.5 10.37 1.05 8.85 1.72 7.01 3.41 5.75 5.39 5.75c1.5 0 2.86.79 3.61 2.02.75-1.23 2.11-2.02 3.61-2.02 1.98 0 3.67 1.26 4.34 3.1.55 1.52.19 3.38-1.52 5.09C18.716 16.65 12 21 12 21z\"/></svg>`\n              : `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-6 h-6 stroke-pink-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 10-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 000-7.78z\"/></svg>`\n          }\n        </button>\n      </div>\n      <div class=\"p-4\">\n        <h2 class=\"text-lg font-semibold\">${movie.title}</h2>\n        <p class=\"text-sm text-gray-600\">Rating: ${movie.vote_average}</p>\n      </div>\n    `;\n\n    movieCard.querySelector(\".fav-btn\").addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n      toggleFav(movie);\n\n      const btn = e.currentTarget;\n      const nowFav = isFav(movie.id);\n      btn.innerHTML = nowFav\n        ? `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-6 h-6 fill-pink-500\" viewBox=\"0 0 24 24\"><path d=\"M12 21s-6.716-4.35-9.428-7.062C.86 12.226.5 10.37 1.05 8.85 1.72 7.01 3.41 5.75 5.39 5.75c1.5 0 2.86.79 3.61 2.02.75-1.23 2.11-2.02 3.61-2.02 1.98 0 3.67 1.26 4.34 3.1.55 1.52.19 3.38-1.52 5.09C18.716 16.65 12 21 12 21z\"/></svg>`\n        : `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-6 h-6 stroke-pink-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 10-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 000-7.78z\"/></svg>`;\n    });\n\n    movieCard.addEventListener(\"click\", (e) => {\n      document.getElementById(\"popup\").classList.remove(\"hidden\");\n      e.preventDefault();\n      populatePopup(movie);\n    });\n\n    container.appendChild(movieCard);\n  });\n}\n\nfetchMovies();\n\n/**\n * Show 4 films from one random array.\n * @function randomFilmArray\n * @param {Object[]} array - Complet list of films.\n * @returns {Object[]} New array with 4 random films.\n */\nfunction randomFilmArray(array) {\n  return array.sort(() => Math.random() - 0.5).slice(0, 4);\n}\n\n/**\n * Show Casual cards into the  \"Live Shows\" section.\n *\n * @function displayShows\n * @param {Object[]} movies - Films list from dall'API TMDB.\n * @param {string} movies[].title - Titol of Film.\n * @param {string} movies[].overview - Description of film.\n * @param {string} movies[].poster_path - Image for each film from TMDB.\n *\n * @example\n * // Example of how to use displayShows function:\n * displayShows(moviesArray);\n */\nfunction displayShows(movies) {\n  movies = randomFilmArray(movies);\n  const showContainer = document.getElementById(\"liveshows\");\n  showContainer.innerHTML = \"\";\n\n  // Gestione edge-case: array vuoto o nullo\n  if (!movies || movies.length === 0) {\n    showContainer.innerHTML = `\n      <p class=\"text-center flex justify-center text-gray-500 mt-4\">\n        No movies found.\n      </p>\n    `;\n    return; // Interrompe l'esecuzione della funzione\n  }\n\n  movies.forEach((movie) => {\n    const showCard = document.createElement(\"div\");\n\n    showCard.innerHTML = `\n        <a   href=\"\">\n              <img\n                class=\"w-full aspect-[16/24] bg-cover rounded-lg overflow-hidden mb-3  max-[910px]:w-[1000px] max-[910px]:bg-fit max-[910px]:h-[350px]\"\n                src=\"${imageBaseUrl}${movie.poster_path}\"\n                alt=\"${movie.title}\"\n              />\n              <a\n                href=\"#\"\n                class=\"text-[1.1rem] font-bold tracking-normal hover:text-blue-600 transition-colors\"\n              >\n                ${movie.title}\n              </a>\n              <p class=\"mt-2 text-[0.9rem]\">${movie.overview}</p>\n            </a>\n    `;\n\n    // When we click on the showCard, we want to open the popup\n    showCard.addEventListener(\"click\", (e) => {\n      document.getElementById(\"popup\").classList.remove(\"hidden\");\n      e.preventDefault();\n      populatePopup(movie);\n    });\n\n    showContainer.appendChild(showCard);\n  });\n}\n\nconst popup = document.getElementById(\"popup\");\n\n// Close button functionality for the popup\nconst closeBtn = document.getElementById(\"popupCloseBtn\");\n\ncloseBtn.addEventListener(\"click\", () => {\n  popup.classList.add(\"hidden\");\n});\n\n/**\n * Fills the popup with detailed information about a movie\n * and makes the modal visible.\n *\n * @function populatePopup\n * @param {Movie} movie - Movie object containing TMDB data.\n *\n * @example\n * // Example usage:\n * populatePopup({\n *   id: 123,\n *   title: \"Inception\",\n *   overview: \"A mind-bending thriller...\",\n *   release_date: \"2010-07-16\",\n *   poster_path: \"/abc123.jpg\",\n *   vote_average: 8.8,\n *   popularity: 350\n * });\n */\nfunction populatePopup(movie) {\n  currentMovieId = movie.id;\n\n  const titlePopUp = document.querySelector(\".info-container h1\");\n  titlePopUp.textContent = movie.title;\n\n  const year = movie.release_date;\n  const infoFilm = document.querySelector(\"#popup .info-film\");\n  infoFilm.innerHTML = `\n    <p class=\"bg-orange-400 rounded-md px-2 py-1\">Release Year: ${year}</p>\n  `;\n\n  const ratingValue = movie.vote_average\n    ? movie.vote_average.toFixed(1)\n    : \"N/A\";\n  document.querySelector(\n    \"#popup .pop-container .flex.flex-col.items-center p.text-white span\"\n  ).textContent = ratingValue;\n\n  const popularity = movie.popularity ? Math.round(movie.popularity) : \"N/A\";\n  document.querySelector(\n    \"#popup .pop-container .flex.items-center.gap-2 p.text-gray-500 span\"\n  ).textContent = popularity;\n\n  const imageElem = document.querySelector(\".img-popup\");\n  imageElem.src = imageBaseUrl + movie.poster_path;\n  imageElem.alt = movie.title;\n\n  document.querySelector(\".description\").textContent = movie.overview;\n\n  popup.classList.remove(\"hidden\");\n\n  loadReviewsForMovie(currentMovieId);\n}\n\n//POP UP FUNCTIONALITY\n\n/**\n * Fills the popup with movie details\n * Shows title, release year, rating, popularity, poster, and overview\n * @param {Object} movie - Movie object with properties: id, title, release_date, vote_average, popularity, poster_path, overview\n */\nfunction populatePopup(movie) {\n  currentMovieId = movie.id;\n\n  document.querySelector(\".info-container h1\").textContent = movie.title;\n  document.querySelector(\"#popup .info-film\").innerHTML = `\n    <p class=\"bg-orange-400 rounded-md px-2 py-1\">Release Year: ${movie.release_date}</p>\n  `;\n\n  const ratingValue = movie.vote_average\n    ? movie.vote_average.toFixed(1)\n    : \"N/A\";\n  document.querySelector(\"#popup .pop-container p span\").textContent =\n    ratingValue;\n\n  const popularity = movie.popularity ? Math.round(movie.popularity) : \"N/A\";\n  document.querySelector(\n    \"#popup .pop-container .flex.items-center p span\"\n  ).textContent = popularity;\n\n  const imageElem = document.querySelector(\".img-popup\");\n  imageElem.src = imageBaseUrl + movie.poster_path;\n  imageElem.alt = movie.title;\n\n  document.querySelector(\".description\").textContent = movie.overview;\n\n  loadReviewsForMovie(currentMovieId);\n}\n\n//REVIEW FUNCTIONALITY\n\n/**\n * Returns the localStorage key for storing reviews of a movie\n * @param {number} movieId - Movie ID\n * @returns {string} - Key for localStorage\n */\nfunction getStorageKey(movieId) {\n  return `reviews_${movieId}`;\n}\n\n/**\n * Loads and displays reviews for a given movie\n * @param {number} movieId - Movie ID\n */\nfunction loadReviewsForMovie(movieId) {\n  const reviews =\n    JSON.parse(localStorage.getItem(getStorageKey(movieId))) || [];\n  reviewContainer.innerHTML = \"\";\n\n  reviews.forEach((review, index) => {\n    const reviewDiv = document.createElement(\"div\");\n    reviewDiv.className =\n      \"bg-gray-100 p-3 mb-2 rounded-md flex justify-between items-center\";\n\n    reviewDiv.innerHTML = `\n      <span class=\"text-gray-700\">${review}</span>\n      <button class=\"text-red-500 hover:text-red-700\">❌</button>\n    `;\n\n    reviewDiv.querySelector(\"button\").addEventListener(\"click\", () => {\n      deleteReviewForMovie(movieId, index);\n    });\n\n    reviewContainer.appendChild(reviewDiv);\n  });\n}\n\n/**\n * Deletes a specific review for a movie\n * Updates the UI and localStorage\n * @param {number} movieId - Movie ID\n * @param {number} index - Index of the review to delete\n */\nfunction deleteReviewForMovie(movieId, index) {\n  const key = getStorageKey(movieId);\n  const reviews = JSON.parse(localStorage.getItem(key)) || [];\n  reviews.splice(index, 1);\n  localStorage.setItem(key, JSON.stringify(reviews));\n  loadReviewsForMovie(movieId);\n}\n\n// the following part from hua: This function is triggered when the \"Random Film\" button is clicked\ndocument.getElementById(\"random-film-btn\").onclick = async function () {\n  const apiKey = \"fcb5f9f40d9acdf7af2d8c38ded9bb12\"; // <-- Replace with your TMDB API key\n  const url = `https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}&language=en-US&page=1`;\n\n  try {\n    const response = await fetch(url);\n    const data = await response.json();\n    const movies = data.results;\n    if (!movies || movies.length === 0) {\n      document.getElementById(\"film-result\").innerHTML = \"No movies found.\";\n      return;\n    }\n    const randomMovie = movies[Math.floor(Math.random() * movies.length)];\n    document.getElementById(\"film-result\").innerHTML = `\n      <div class=\"flex flex-col items-center\">\n        <img src=\"https://image.tmdb.org/t/p/w300${randomMovie.poster_path}\" alt=\"${randomMovie.title}\" class=\"mb-4 rounded shadow-lg\" />\n        <h2 class=\"text-2xl font-bold mb-2\">${randomMovie.title}</h2>\n        <p class=\"text-gray-700 mb-2\">${randomMovie.release_date}</p>\n        <p class=\"text-gray-600 max-w-md\">${randomMovie.overview}</p>\n        <button id=\"write-thoughts-btn\" class=\"mt-4 bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-800 transition\">Write your thoughts</button>\n      </div>\n    `;\n\n    // Add event listener for the new button\n    document.getElementById(\"write-thoughts-btn\").onclick = function () {\n      // Save movie info to localStorage\n      localStorage.setItem(\"selectedMovie\", JSON.stringify(randomMovie));\n      // Redirect to journal.html\n      window.location.href = \"journal.html\";\n    };\n  } catch (error) {\n    document.getElementById(\"film-result\").innerHTML = \"Error fetching movies.\";\n  }\n};\n"],"names":[],"version":3,"file":"TMDB-PROJECT-REFACTORED.de158e3a.js.map","sourceRoot":"/__parcel_source_root/"}