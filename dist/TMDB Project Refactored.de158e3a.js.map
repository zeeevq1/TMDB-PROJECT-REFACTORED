{"mappings":"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","sources":["src/main.js"],"sourcesContent":["const apiKey = \"fcb5f9f40d9acdf7af2d8c38ded9bb12\";\r\nconst apiUrl = `https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}&language=en-US&page=1`;\r\nconst imageBaseUrl = \"https://image.tmdb.org/t/p/w500\";\r\nconst LS_KEY = \"favorites\"; // کلید ذخیره‌سازی\r\n\r\nfunction loadFavorites() {\r\n  try {\r\n    return JSON.parse(localStorage.getItem(LS_KEY)) || [];\r\n  } catch {\r\n    return [];\r\n  }\r\n}\r\nfunction saveFavorites(favs) {\r\n  localStorage.setItem(LS_KEY, JSON.stringify(favs));\r\n}\r\nfunction isFav(id) {\r\n  const favs = loadFavorites();\r\n  return favs.some((m) => m.id === id);\r\n}\r\nfunction toggleFav(movie) {\r\n  const favs = loadFavorites();\r\n  const idx = favs.findIndex((m) => m.id === movie.id);\r\n  if (idx >= 0) favs.splice(idx, 1);\r\n  else\r\n    favs.push({\r\n      id: movie.id,\r\n      title: movie.title,\r\n      poster_path: movie.poster_path,\r\n      vote_average: movie.vote_average,\r\n      release_date: movie.release_date,\r\n    });\r\n  saveFavorites(favs);\r\n}\r\n\r\nasync function fetchMovies() {\r\n  try {\r\n    const res = await fetch(apiUrl);\r\n    const data = await res.json();\r\n    const movies = data.results;\r\n    displayMovies(data.results);\r\n    displayMovies(movies);\r\n    displayShows(movies);\r\n  } catch (error) {\r\n    console.error(\"Error fetching movies:\", error);\r\n  }\r\n}\r\n\r\nfunction displayMovies(movies) {\r\n  const container = document.getElementById(\"movie-container\");\r\n  container.innerHTML = \"\";\r\n\r\n  movies.forEach((movie) => {\r\n    const faved = isFav(movie.id);\r\n    const movieCard = document.createElement(\"div\");\r\n    movieCard.className =\r\n      \"bg-white/60 backdrop-blur rounded-lg overflow-hidden shadow-md hover:scale-105 transition transform duration-300 text-gray-900\";\r\n\r\n    movieCard.innerHTML = `\r\n      <div class=\"relative\">\r\n        <img src=\"${imageBaseUrl}${movie.poster_path}\" alt=\"${\r\n      movie.title\r\n    }\" class=\"w-full h-auto\">\r\n        <button\r\n          class=\"fav-btn absolute top-2 right-2 rounded-full p-2 bg-white/80 hover:bg-white shadow\"\r\n          aria-label=\"favorite\"\r\n          data-id=\"${movie.id}\">\r\n          ${\r\n            faved\r\n              ? `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-6 h-6 fill-pink-500\" viewBox=\"0 0 24 24\"><path d=\"M12 21s-6.716-4.35-9.428-7.062C.86 12.226.5 10.37 1.05 8.85 1.72 7.01 3.41 5.75 5.39 5.75c1.5 0 2.86.79 3.61 2.02.75-1.23 2.11-2.02 3.61-2.02 1.98 0 3.67 1.26 4.34 3.1.55 1.52.19 3.38-1.52 5.09C18.716 16.65 12 21 12 21z\"/></svg>`\r\n              : `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-6 h-6 stroke-pink-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 10-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 000-7.78z\"/></svg>`\r\n          }\r\n        </button>\r\n      </div>\r\n      <div class=\"p-4\">\r\n        <h2 class=\"text-lg font-semibold\">${movie.title}</h2>\r\n        <p class=\"text-sm text-gray-600\">Rating: ${movie.vote_average}</p>\r\n      </div>\r\n    `;\r\n\r\n    movieCard.querySelector(\".fav-btn\").addEventListener(\"click\", (e) => {\r\n      e.stopPropagation();\r\n      toggleFav(movie);\r\n\r\n      const btn = e.currentTarget;\r\n      const nowFav = isFav(movie.id);\r\n      btn.innerHTML = nowFav\r\n        ? `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-6 h-6 fill-pink-500\" viewBox=\"0 0 24 24\"><path d=\"M12 21s-6.716-4.35-9.428-7.062C.86 12.226.5 10.37 1.05 8.85 1.72 7.01 3.41 5.75 5.39 5.75c1.5 0 2.86.79 3.61 2.02.75-1.23 2.11-2.02 3.61-2.02 1.98 0 3.67 1.26 4.34 3.1.55 1.52.19 3.38-1.52 5.09C18.716 16.65 12 21 12 21z\"/></svg>`\r\n        : `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-6 h-6 stroke-pink-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 10-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 000-7.78z\"/></svg>`;\r\n    });\r\n\r\n    movieCard.addEventListener(\"click\", (e) => {\r\n      document.getElementById(\"popup\").classList.remove(\"hidden\");\r\n      e.preventDefault();\r\n      populatePopup(movie);\r\n    });\r\n\r\n    container.appendChild(movieCard);\r\n  });\r\n}\r\n\r\nfetchMovies();\r\n\r\n/**\r\n * Show 4 films from one random array.\r\n * @function randomFilmArray\r\n * @param {Object[]} array - Complet list of films.\r\n * @returns {Object[]} New array with 4 random films.\r\n */\r\nfunction randomFilmArray(array) {\r\n  return array.sort(() => Math.random() - 0.5).slice(0, 4);\r\n}\r\n\r\n/**\r\n * Show Casual cards into the  \"Live Shows\" section.\r\n *\r\n * @function displayShows\r\n * @param {Object[]} movies - Films list from dall'API TMDB.\r\n * @param {string} movies[].title - Titol of Film.\r\n * @param {string} movies[].overview - Description of film.\r\n * @param {string} movies[].poster_path - Image for each film from TMDB.\r\n *\r\n * @example\r\n * // Example of how to use displayShows function:\r\n * displayShows(moviesArray);\r\n */\r\nfunction displayShows(movies) {\r\n  movies = randomFilmArray(movies);\r\n  const showContainer = document.getElementById(\"liveshows\");\r\n  showContainer.innerHTML = \"\";\r\n\r\n  // Gestione edge-case: array vuoto o nullo\r\n  if (!movies || movies.length === 0) {\r\n    showContainer.innerHTML = `\r\n      <p class=\"text-center flex justify-center text-gray-500 mt-4\">\r\n        No movies found.\r\n      </p>\r\n    `;\r\n    return; // Interrompe l'esecuzione della funzione\r\n  }\r\n\r\n  movies.forEach((movie) => {\r\n    const showCard = document.createElement(\"div\");\r\n\r\n    showCard.innerHTML = `\r\n        <a   href=\"\">\r\n              <img\r\n                class=\"w-full aspect-[16/24] bg-cover rounded-lg overflow-hidden mb-3  max-[910px]:w-[1000px] max-[910px]:bg-fit max-[910px]:h-[350px]\"\r\n                src=\"${imageBaseUrl}${movie.poster_path}\"\r\n                alt=\"${movie.title}\"\r\n              />\r\n              <a\r\n                href=\"#\"\r\n                class=\"text-[1.1rem] font-bold tracking-normal hover:text-blue-600 transition-colors\"\r\n              >\r\n                ${movie.title}\r\n              </a>\r\n              <p class=\"mt-2 text-[0.9rem]\">${movie.overview}</p>\r\n            </a>\r\n    `;\r\n\r\n    // When we click on the showCard, we want to open the popup\r\n    showCard.addEventListener(\"click\", (e) => {\r\n      document.getElementById(\"popup\").classList.remove(\"hidden\");\r\n      e.preventDefault();\r\n      populatePopup(movie);\r\n    });\r\n\r\n    showContainer.appendChild(showCard);\r\n  });\r\n}\r\n\r\nconst popup = document.getElementById(\"popup\");\r\n\r\n// Close button functionality for the popup\r\nconst closeBtn = document.getElementById(\"popupCloseBtn\");\r\n\r\ncloseBtn.addEventListener(\"click\", () => {\r\n  popup.classList.add(\"hidden\");\r\n});\r\n\r\n/**\r\n * Fills the popup with detailed information about a movie\r\n * and makes the modal visible.\r\n *\r\n * @function populatePopup\r\n * @param {Movie} movie - Movie object containing TMDB data.\r\n *\r\n * @example\r\n * // Example usage:\r\n * populatePopup({\r\n *   id: 123,\r\n *   title: \"Inception\",\r\n *   overview: \"A mind-bending thriller...\",\r\n *   release_date: \"2010-07-16\",\r\n *   poster_path: \"/abc123.jpg\",\r\n *   vote_average: 8.8,\r\n *   popularity: 350\r\n * });\r\n */\r\nfunction populatePopup(movie) {\r\n  currentMovieId = movie.id;\r\n\r\n  const titlePopUp = document.querySelector(\".info-container h1\");\r\n  titlePopUp.textContent = movie.title;\r\n\r\n  const year = movie.release_date;\r\n  const infoFilm = document.querySelector(\"#popup .info-film\");\r\n  infoFilm.innerHTML = `\r\n    <p class=\"bg-orange-400 rounded-md px-2 py-1\">Release Year: ${year}</p>\r\n  `;\r\n\r\n  const ratingValue = movie.vote_average\r\n    ? movie.vote_average.toFixed(1)\r\n    : \"N/A\";\r\n  document.querySelector(\r\n    \"#popup .pop-container .flex.flex-col.items-center p.text-white span\"\r\n  ).textContent = ratingValue;\r\n\r\n  const popularity = movie.popularity ? Math.round(movie.popularity) : \"N/A\";\r\n  document.querySelector(\r\n    \"#popup .pop-container .flex.items-center.gap-2 p.text-gray-500 span\"\r\n  ).textContent = popularity;\r\n\r\n  const imageElem = document.querySelector(\".img-popup\");\r\n  imageElem.src = imageBaseUrl + movie.poster_path;\r\n  imageElem.alt = movie.title;\r\n\r\n  document.querySelector(\".description\").textContent = movie.overview;\r\n\r\n  popup.classList.remove(\"hidden\");\r\n\r\n  loadReviewsForMovie(currentMovieId);\r\n}\r\n\r\n//POP UP FUNCTIONALITY\r\n\r\n/**\r\n * Fills the popup with movie details\r\n * Shows title, release year, rating, popularity, poster, and overview\r\n * @param {Object} movie - Movie object with properties: id, title, release_date, vote_average, popularity, poster_path, overview\r\n */\r\nfunction populatePopup(movie) {\r\n  currentMovieId = movie.id;\r\n\r\n  document.querySelector(\".info-container h1\").textContent = movie.title;\r\n  document.querySelector(\"#popup .info-film\").innerHTML = `\r\n    <p class=\"bg-orange-400 rounded-md px-2 py-1\">Release Year: ${movie.release_date}</p>\r\n  `;\r\n\r\n  const ratingValue = movie.vote_average\r\n    ? movie.vote_average.toFixed(1)\r\n    : \"N/A\";\r\n  document.querySelector(\"#popup .pop-container p span\").textContent =\r\n    ratingValue;\r\n\r\n  const popularity = movie.popularity ? Math.round(movie.popularity) : \"N/A\";\r\n  document.querySelector(\r\n    \"#popup .pop-container .flex.items-center p span\"\r\n  ).textContent = popularity;\r\n\r\n  const imageElem = document.querySelector(\".img-popup\");\r\n  imageElem.src = imageBaseUrl + movie.poster_path;\r\n  imageElem.alt = movie.title;\r\n\r\n  document.querySelector(\".description\").textContent = movie.overview;\r\n\r\n  loadReviewsForMovie(currentMovieId);\r\n}\r\n\r\n//REVIEW FUNCTIONALITY\r\n\r\n/**\r\n * Returns the localStorage key for storing reviews of a movie\r\n * @param {number} movieId - Movie ID\r\n * @returns {string} - Key for localStorage\r\n */\r\nfunction getStorageKey(movieId) {\r\n  return `reviews_${movieId}`;\r\n}\r\n\r\n/**\r\n * Loads and displays reviews for a given movie\r\n * @param {number} movieId - Movie ID\r\n */\r\nfunction loadReviewsForMovie(movieId) {\r\n  const reviews =\r\n    JSON.parse(localStorage.getItem(getStorageKey(movieId))) || [];\r\n  reviewContainer.innerHTML = \"\";\r\n\r\n  reviews.forEach((review, index) => {\r\n    const reviewDiv = document.createElement(\"div\");\r\n    reviewDiv.className =\r\n      \"bg-gray-100 p-3 mb-2 rounded-md flex justify-between items-center\";\r\n\r\n    reviewDiv.innerHTML = `\r\n      <span class=\"text-gray-700\">${review}</span>\r\n      <button class=\"text-red-500 hover:text-red-700\">❌</button>\r\n    `;\r\n\r\n    reviewDiv.querySelector(\"button\").addEventListener(\"click\", () => {\r\n      deleteReviewForMovie(movieId, index);\r\n    });\r\n\r\n    reviewContainer.appendChild(reviewDiv);\r\n  });\r\n}\r\n\r\n/**\r\n * Deletes a specific review for a movie\r\n * Updates the UI and localStorage\r\n * @param {number} movieId - Movie ID\r\n * @param {number} index - Index of the review to delete\r\n */\r\nfunction deleteReviewForMovie(movieId, index) {\r\n  const key = getStorageKey(movieId);\r\n  const reviews = JSON.parse(localStorage.getItem(key)) || [];\r\n  reviews.splice(index, 1);\r\n  localStorage.setItem(key, JSON.stringify(reviews));\r\n  loadReviewsForMovie(movieId);\r\n}\r\n\r\n// the following part from hua: This function is triggered when the \"Random Film\" button is clicked\r\ndocument.getElementById(\"random-film-btn\").onclick = async function () {\r\n  const apiKey = \"fcb5f9f40d9acdf7af2d8c38ded9bb12\"; // <-- Replace with your TMDB API key\r\n  const url = `https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}&language=en-US&page=1`;\r\n\r\n  try {\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n    const movies = data.results;\r\n    if (!movies || movies.length === 0) {\r\n      document.getElementById(\"film-result\").innerHTML = \"No movies found.\";\r\n      return;\r\n    }\r\n    const randomMovie = movies[Math.floor(Math.random() * movies.length)];\r\n    document.getElementById(\"film-result\").innerHTML = `\r\n      <div class=\"flex flex-col items-center\">\r\n        <img src=\"https://image.tmdb.org/t/p/w300${randomMovie.poster_path}\" alt=\"${randomMovie.title}\" class=\"mb-4 rounded shadow-lg\" />\r\n        <h2 class=\"text-2xl font-bold mb-2\">${randomMovie.title}</h2>\r\n        <p class=\"text-gray-700 mb-2\">${randomMovie.release_date}</p>\r\n        <p class=\"text-gray-600 max-w-md\">${randomMovie.overview}</p>\r\n        <button id=\"write-thoughts-btn\" class=\"mt-4 bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-800 transition\">Write your thoughts</button>\r\n      </div>\r\n    `;\r\n\r\n    // Add event listener for the new button\r\n    document.getElementById(\"write-thoughts-btn\").onclick = function () {\r\n      // Save movie info to localStorage\r\n      localStorage.setItem(\"selectedMovie\", JSON.stringify(randomMovie));\r\n      // Redirect to journal.html\r\n      window.location.href = \"journal.html\";\r\n    };\r\n  } catch (error) {\r\n    document.getElementById(\"film-result\").innerHTML = \"Error fetching movies.\";\r\n  }\r\n};\r\n"],"names":[],"version":3,"file":"TMDB Project Refactored.de158e3a.js.map","sourceRoot":"/__parcel_source_root/"}